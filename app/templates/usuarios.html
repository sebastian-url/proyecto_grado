<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Usuarios - AvenaCorp</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/usuarios.css') }}">
  <link rel="icon" href="{{ url_for('static', filename='img/icono.png') }}">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

  <!-- Navbar -->
  <div class="navbar">
    <button class="menu-toggle" id="toggleMenu">☰</button>
    <h1>RicaAvena - Usuarios</h1>
    <div class="usuario">Bienvenido, <span id="nombre-usuario">Cargando...</span></div>
  </div>

  <!-- Menú lateral -->
  <div class="sidebar" id="sidebarMenu" >
    <a href="/menu">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-house-icon lucide-house"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>
        Inicio
    </a>
    <a href="/productos">
      <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-package-icon lucide-package"><path d="M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"/><path d="M12 22V12"/><polyline points="3.29 7 12 12 20.71 7"/><path d="m7.5 4.27 9 5.15"/></svg>
      Productos
    </a>
    <a href="/usuarios">
      <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users-icon lucide-users"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><path d="M16 3.128a4 4 0 0 1 0 7.744"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><circle cx="9" cy="7" r="4"/></svg>
      Usuarios
    </a>
    <a href="/pedidos">
      <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-notepad-text-icon lucide-notepad-text"><path d="M8 2v4"/><path d="M12 2v4"/><path d="M16 2v4"/><rect width="16" height="18" x="4" y="4" rx="2"/><path d="M8 10h6"/><path d="M8 14h8"/><path d="M8 18h5"/></svg>
      Pedidos
    </a>
    <a href="/historial">
      <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clock9-icon lucide-clock-9"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 7.5 12"/></svg>
      Historial
    </a>
    <a onclick="abrirModalCambio()" class="btn-cambio">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-lock-keyhole-icon lucide-lock-keyhole"><circle cx="12" cy="16" r="1"/><rect x="3" y="10" width="18" height="12" rx="2"/><path d="M7 10V7a5 5 0 0 1 10 0v3"/></svg>
      Cambiar contraseña
    </a>
    <a href="/logout">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-log-out-icon lucide-log-out"><path d="m16 17 5-5-5-5"/><path d="M21 12H9"/><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/></svg>
      Cerrar sesión
    </a>
  </div>

  <!-- Contenido -->
  <div class="contenido">
    <h2>Lista de Usuarios</h2>
    <label class="filtro
    
    " for="filtro-estado">Filtrar por estado:</label>
    <select id="filtro-estado" class="select-filtro">
      <option value="">Todos</option>
      <option value="activo">Activo</option>
      <option value="inactivo">Bloqueado</option>
      <option value="eliminado">Eliminado</option>
    </select>


    <br>
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Apellido</th>
          <th>Correo</th>
          <th>Celular</th>
          <th>Estado</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody id="tabla-usuarios">
        <!-- Usuarios se insertan aquí dinámicamente -->
      </tbody>
    </table>
  </div>

  <!-- Modal de mensaje -->
  <div id="modalMensaje" class="modal" style="display: none;">
    <div class="modal-content">
      <p id="textoMensaje"></p>
    </div>
  </div>

  <!-- Modal de confirmación para bloqueo -->
  <div class="modal" id="modalConfirmacion">
    <div class="modal-content">
      <p id="mensajeModal">¿Estás seguro de que deseas bloquear este usuario?</p>
      <div class="modal-buttons">
        <button class="btn-cancelar" onclick="cerrarModal()">Cancelar</button>
        <button class="btn-confirmar" onclick="confirmarBloqueo()">Confirmar</button>
      </div>
    </div>
  </div>
  <!-- Modal de cambio de contraseña -->
  <div class="modal" id="modalCambio" style="display: none;">
    <div class="modal-content">
      <h2>Cambiar contraseña</h2>
      <form id="formCambio" onsubmit="enviarCambio(event)">
        <label>Contraseña actual:</label><br>
        <input type="password" name="actual" required><br>
        <label>Nueva contraseña:</label><br>
        <input type="password" name="nueva" required><br>
        <label>Confirmar nueva contraseña:</label><br>
        <input type="password" name="confirmar" required><br><br>
        <div class="modal-buttons">
          <button type="button" class="btn-cancelar" onclick="cerrarModalCambio()">Cancelar</button>
          <button type="submit" class="btn-confirmar">Guardar</button>
        </div>
      </form>
    </div>
  </div>
  <!-- Script -->
  <script src="{{ url_for('static', filename='js/usuarios.js') }}"></script>
</body>
</html>
